{% extends '_full.html.twig' %}

{% set meta_title = 'Themen' %}
{% set meta_subtitle = 'Beitragsübersicht' %}

{% set sidebar = 'blog' %}

{% block page_header %}
<section class="py-3">
    <div class="container">

        {{ include('component/blog_subbar.html.twig',{'selected':'index'}) }}

        <div class="mb-3">{{ include('component/_blog_filter.html.twig') }}</div>

        <div class="row g-3">

            <div class="col-lg-9">
                <div class="row row-cols-1 row-cols-lg-2 g-3 align-content-stretch">
                    {% for post in posts %}
                        {% if post.isPublished %}
                            <div class="col">
                                <div class="card text-white bg-white border-primary h-100">
                                    {% if post.image.name %}
                                        <img class="card-img" src="{{ vich_uploader_asset(post)|imagine_filter('post_thumbnail')  }}" alt="{{ post }}" style="filter: brightness(80%);">
                                    {% else %}
                                        <img class="card-img" src="https://dummyimage.com/800x480/294a70/294a70&text=Preview" alt="{{ post }}" style="filter: brightness(80%);">
                                    {% endif %}
                                    <div class="card-img-overlay d-flex flex-column h-100">
                                        <div class="text-uppercase small card-text">{{ post.type }}</div>
                                        <h3 class="fw-normal h2">{{ post.title }}</h3>

                                        <a href="{{ path('blog_show',{'slug':post.slug}) }}" class="card-link stretched-link text-decoration-none link-white mt-auto fs-5">weiterlesen <i class="fas fa-chevron-right"></i></a>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="col">
                            Aktuell sind keine Meldungen vorhanden
                        </div>
                    {% endfor %}
                </div>

                <div class="row g-3 py-3">
                    <div class="col-12">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination">
                                <li class="page-item">
                                    <a class="page-link" href="#" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li class="page-item"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

            </div>

            <div class="col-lg-3">
                <div class="card bg-white">
                    <div class="card-body  border-bottom border-primary">
                        <h3 class="h5 mb-0 text-center text-lg-start">Dein Beitrag</h3>
                    </div>
                    <div class="card-body">
                        <p>
                            Reiche einen eigenen Artikel zur Veröffentlichung im Themen-Blog ein. Beachte dabei unsere
                            Richtlinien für Veröffentlichungen von Beiträgen.
                        </p>
                        <a href="#"><i class="fa-regular fa-fw fa-file-pdf me-2"></i>Leitfaden - Community-Beiträge</a>
                        <p class="pt-3">
                            Sende deinen Beitrag an <a href="#">redaktion@treptowkolleg.de</a>.
                        </p>
                        <p class="mb-0">
                            Unter bestimmten Voraussetzungen kann für dich das <strong>Authoring</strong> freigeschaltet
                            werden. So kannst du auch selbstständig Beiträge veröffentlichen. Unsere Nutzungsbedingungen
                            gelten auch hier.
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 d-none">
                <div class="">
                    <div class="fs-5 fw-bolder mb-1">Beitragsart</div>
                    <div class="card  border-primary mb-3">
                        <div class="list-group list-group-flush">
                            {% for type in types|sort((a, b) => b.blogposts.count <=> a.blogposts.count) %}
                                {% if type.blogposts.count > 0 %}
                                    {% if type.title in filtered_types %}
                                        <div class="list-group-item d-flex justify-content-between align-items-center py-3 active">
                                            <span>{{ type.title }}</span><span class="badge text-bg-primary">{{ type.blogposts.count }}</span>
                                        </div>
                                    {% else %}
                                        <a href="{{ url('blog_index',{'types': type.title ~ ',' ~ filtered_types|join(',')}) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
                                            <span>{{ type.title }}</span><span class="badge text-bg-primary">{{ type.blogposts.count }}</span>
                                        </a>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <a href="{{ url('blog_index') }}" class="d-block">Alle Beiträge anzeigen</a>
                </div>
            </div>

        </div>


    </div>
</section>
{% endblock %}
{% block body %}

{% endblock %}

{% block aside %}

{% endblock %}
